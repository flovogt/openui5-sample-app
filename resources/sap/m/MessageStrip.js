/*!
* OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["./library","sap/ui/core/AnimationMode","sap/ui/core/Control","./MessageStripUtilities","./Text","./Link","./FormattedText","sap/ui/core/ControlBehavior","sap/ui/core/Lib","sap/ui/core/message/MessageType","./MessageStripRenderer","sap/base/Log","sap/m/Button","sap/ui/core/InvisibleText"],function(e,t,i,o,a,r,s,n,l,p,g,u,d,c){"use strict";var f=e.ButtonType;var h=e.MessageStripColorSet;var m=i.extend("sap.m.MessageStrip",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MessageStrip.designtime",properties:{text:{type:"string",group:"Data",defaultValue:""},type:{type:"sap.ui.core.message.MessageType",group:"Appearance",defaultValue:p.Information},colorSet:{type:"sap.m.MessageStripColorSet",group:"Appearance",defaultValue:h.Default},colorScheme:{type:"int",group:"Appearance",defaultValue:1},customIcon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},showIcon:{type:"boolean",group:"Appearance",defaultValue:false},showCloseButton:{type:"boolean",group:"Appearance",defaultValue:false},enableFormattedText:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"link",aggregations:{link:{type:"sap.m.Link",multiple:false,singularName:"link"},controls:{type:"sap.m.Link",multiple:true,singularName:"control",forwarding:{idSuffix:"-formattedText",aggregation:"controls"}},_formattedText:{type:"sap.m.FormattedText",multiple:false,visibility:"hidden"},_text:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_closeButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"}},events:{close:{}},dnd:{draggable:true,droppable:false}},renderer:g});m.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true);this.setAggregation("_text",new a);this._initCloseButton()};m.prototype.onBeforeRendering=function(){this._normalizeType(this.getType());this._setButtonAriaLabelledBy(this.getType())};m.prototype.setText=function(e){var t=this.getAggregation("_formattedText");if(t){t.setHtmlText(e)}this.getAggregation("_text").setText(e);return this.setProperty("text",e)};m.prototype.close=function(){var e=n.getAnimationMode(),i=e!==t.none&&e!==t.minimal;var a=function(){this.setVisible(false);this.fireClose()}.bind(this);if(!i){a();return}o.closeTransitionWithCSS.call(this,a)};m.prototype.setEnableFormattedText=function(e){var t=this.getAggregation("_formattedText");if(e){if(!t){t=new s(this.getId()+"-formattedText");t._setUseLimitedRenderingRules(true);this.setAggregation("_formattedText",t)}t.setHtmlText(this.getText())}return this.setProperty("enableFormattedText",e)};m.prototype.setAggregation=function(e,t,o){if(e==="link"&&t instanceof r){var a=this._ariaReferenceId(),s=t.getAriaDescribedBy();if(!s.includes(a)){t.addAriaDescribedBy(a)}}i.prototype.setAggregation.call(this,e,t,o);return this};g.getAccessibilityState=function(){var e=o.getAccessibilityState.call(this),t=this.getLink(),i=l.getResourceBundleFor("sap.m");if(!t){e.labelledby=this._ariaReferenceId()}e.roledescription=i.getText("MESSAGE_STRIP_ARIA_ROLE_DESCRIPTION");return e};m.prototype.ontouchmove=function(e){e.setMarked()};m.prototype._normalizeType=function(e){if(e===p.None){u.warning(o.MESSAGES.TYPE_NOT_SUPPORTED);this.setProperty("type",p.Information,true)}};m.prototype._initCloseButton=function(){var e=l.getResourceBundleFor("sap.m"),t=this.getAggregation("_closeButton");if(!t){var i=new d({type:f.Transparent,tooltip:e.getText("MESSAGE_STRIP_TITLE"),icon:"sap-icon://decline",press:this.close.bind(this)}).addStyleClass(o.CLASSES.CLOSE_BUTTON).addStyleClass("sapUiSizeCompact");this.setAggregation("_closeButton",i);this._setButtonAriaLabelledBy(this.getType())}};m.prototype._setButtonAriaLabelledBy=function(e){var t=this.getAggregation("_closeButton"),i=l.getResourceBundleFor("sap.m"),o=i.getText("MESSAGE_STRIP_"+e.toUpperCase()+"_CLOSE_BUTTON");if(!this._oInvisibleText){this._oInvisibleText=new c({text:o}).toStatic()}else{this._oInvisibleText.setText(o)}if(t){t.removeAllAssociation("ariaLabelledBy",true);t.addAssociation("ariaLabelledBy",this._oInvisibleText.getId(),true)}};m.prototype._ariaReferenceId=function(){var e=this.getEnableFormattedText()?this.getAggregation("_formattedText").getId():this.getAggregation("_text").getId();return this.getId()+"-info"+" "+e};m.prototype._getColorSetClass=function(){var e=this.getColorSet();var t=this.getColorScheme();var i=this.getType();var a=o.CLASSES.ROOT;if(t<1||t>10){u.warning("sap.m.MessageStrip: colorScheme value is set to the default value of 1. Provided value should be between 1 and 10");t=1}var r={[h.Default]:`${a}${i}`,[h.ColorSet1]:`${a}ColorSet1 ${a}ColorScheme${t}`,[h.ColorSet2]:`${a}ColorSet2 ${a}ColorScheme${t}`};if(!r[e]){e=h.Default}return`${a} ${r[e]}`};m.prototype.exit=function(){if(this._oInvisibleText){this._oInvisibleText.destroy();this._oInvisibleText=null}};return m});
//# sourceMappingURL=MessageStrip.js.map