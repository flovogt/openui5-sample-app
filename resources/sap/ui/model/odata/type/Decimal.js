/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/type/ODataType"],function(t,e,i,n,r,a,o,s){"use strict";var u=/^[-+]?(\d+)(?:\.(\d+))?$/,l=/(?:(\.[0-9]*[1-9]+)0+|\.0*)$/;const m=/^0+|0+$/g;function f(t){return t.oConstraints&&t.oConstraints.scale||0}function c(t,i){return e.getResourceBundleFor("sap.ui.core").getText(t,i)}function p(t){if(t.indexOf(".")>=0){t=t.replace(l,"$1")}return t}function h(e,i){var n,r,a,o,s;function l(i,n){t.warning("Illegal "+n+": "+i,null,e.getName())}function m(t,e,i,n){var r=typeof t==="string"?parseInt(t):t;if(r===undefined){return e}if(typeof r!=="number"||isNaN(r)||r<i){l(t,n);return e}return r}function f(t,e){if(t){if(t.match(u)){return t}l(t,e)}return undefined}function c(t,e){if(t===true||t==="true"){return true}if(t!==undefined&&t!==false&&t!=="false"){l(t,e)}return undefined}function p(t,i,n){if(i!==n){e.oConstraints=e.oConstraints||{};e.oConstraints[t]=i}}e.oConstraints=undefined;if(i){n=i.nullable;a=i.precision;s=i.scale;o=s==="variable"||s==="floating"?Infinity:m(s,0,0,"scale");e.bIsFloating=s==="floating";r=m(a,Infinity,1,"precision");if(o!==Infinity&&r<o){t.warning("Illegal scale: must be less than or equal to precision (precision="+a+", scale="+s+")",null,e.getName());o=Infinity}p("precision",r,Infinity);p("scale",o,0);if(n===false||n==="false"){p("nullable",false,true)}else if(n!==undefined&&n!==true&&n!=="true"){l(n,"nullable")}p("minimum",f(i.minimum,"minimum"));p("minimumExclusive",c(i.minimumExclusive,"minimumExclusive"));p("maximum",f(i.maximum,"maximum"));p("maximumExclusive",c(i.maximumExclusive,"maximumExclusive"))}e._handleLocalizationChange()}var g=s.extend("sap.ui.model.odata.type.Decimal",{constructor:function(t,e){s.apply(this,arguments);this.oFormatOptions=t;h(this,e);this.checkParseEmptyValueToZero()}});g.prototype.formatValue=function(t,e){if(t===null||t===undefined){return null}switch(this.getPrimitiveType(e)){case"any":return t;case"float":return parseFloat(t);case"int":return Math.floor(parseFloat(t));case"string":return this.getFormat().format(p(String(t)));default:throw new n("Don't know how to format "+this.getName()+" to "+e)}};g.prototype.getFormat=function(){if(!this.oFormat){var t={groupingEnabled:true,maxIntegerDigits:Infinity},e=f(this);if(e!==Infinity){t.minFractionDigits=t.maxFractionDigits=e}var n=this.oFormatOptions||{};if(n.style!=="short"&&n.style!=="long"){t.preserveDecimals=true}Object.assign(t,this.oFormatOptions);t.parseAsString=true;delete t.parseEmptyValueToZero;this.oFormat=i.getFloatInstance(t)}return this.oFormat};g.prototype.parseValue=function(t,n){var a=this.getEmptyValue(t);if(a!==undefined){return a}var o;switch(this.getPrimitiveType(n)){case"string":o=this.getFormat().parse(t);if(!o){throw new r(e.getResourceBundleFor("sap.ui.core").getText("EnterNumber"))}o=p(o);break;case"int":case"float":o=i.getFloatInstance({maxIntegerDigits:Infinity,decimalSeparator:".",groupingEnabled:false}).format(t);break;default:throw new r("Don't know how to parse "+this.getName()+" from "+n)}return o};g.prototype._handleLocalizationChange=function(){this.oFormat=null};g.prototype.validateValue=function(t){var e,i,n,r,s,l,p,h,g;if(t===null&&(!this.oConstraints||this.oConstraints.nullable!==false)){return}if(typeof t!=="string"){throw new a(c("EnterNumber"))}n=u.exec(t);if(!n){throw new a(c("EnterNumber"))}i=n[1].length;e=(n[2]||"").length;g=f(this);h=this.oConstraints&&this.oConstraints.precision||Infinity;l=this.oConstraints&&this.oConstraints.minimum;r=this.oConstraints&&this.oConstraints.maximum;if(e>g){if(g===0){throw new a(c("EnterInt"))}else if(i+g>h){if(g!==h){throw new a(c("EnterNumberIntegerFraction",[h-g,g]))}if(n[1]!=="0"){throw new a(c("EnterNumberFractionOnly",[g]))}}throw new a(c("EnterNumberFraction",[g]))}if(g===Infinity){if(this.bIsFloating){const t=(n[1]+(n[2]??"")).replace(m,"");if(t.length>h){throw new a(c("EnterNumberSignificantDigits",[h]))}}else if(i+e>h){throw new a(c("EnterNumberPrecision",[h]))}}else if(i>h-g){if(g!==h){if(g){throw new a(c("EnterNumberInteger",[h-g]))}throw new a(c("EnterMaximumOfDigits",[h]))}if(n[1]!=="0"){throw new a(c("EnterNumberFractionOnly",[g]))}}if(l){p=this.oConstraints.minimumExclusive;if(o.compare(l,t,true)>=(p?0:1)){throw new a(c(p?"EnterNumberMinExclusive":"EnterNumberMin",[this.formatValue(l,"string")]))}}if(r){s=this.oConstraints.maximumExclusive;if(o.compare(r,t,true)<=(s?0:-1)){throw new a(c(s?"EnterNumberMaxExclusive":"EnterNumberMax",[this.formatValue(r,"string")]))}}};g.prototype.getName=function(){return"sap.ui.model.odata.type.Decimal"};return g});
//# sourceMappingURL=Decimal.js.map